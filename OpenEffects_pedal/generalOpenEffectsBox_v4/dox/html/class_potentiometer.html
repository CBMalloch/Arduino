<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cbm generalOpenEffectsBox_v4: Potentiometer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cbm generalOpenEffectsBox_v4
   &#160;<span id="projectnumber">Main revision 0.2.1 / cbm SVN version 141</span>
   </div>
   <div id="projectbrief">General Firmware for OpenEffects Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_potentiometer.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_potentiometer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Potentiometer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrapper for hardware interface -Potentiometer-.  
 <a href="class_potentiometer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_potentiometer_8h_source.html">Potentiometer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a266317bbba4856942985925d044b969a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_potentiometer.html#a266317bbba4856942985925d044b969a">Potentiometer</a> ()</td></tr>
<tr class="separator:a266317bbba4856942985925d044b969a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1c2e1513f98952487482eb48406f1bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_potentiometer.html#ab1c2e1513f98952487482eb48406f1bb">init</a> (int id, int pin, int verbose=<a class="el" href="_potentiometer_8h.html#ada534779e17a276eadfea81c53d6bd03">_Potentiometer_VERBOSE_DEFAULT</a>)</td></tr>
<tr class="separator:ab1c2e1513f98952487482eb48406f1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56e36ed55abee08cbe81ce01687f82ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_potentiometer.html#a56e36ed55abee08cbe81ce01687f82ad">update</a> ()</td></tr>
<tr class="separator:a56e36ed55abee08cbe81ce01687f82ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518a49f1d9d85ae9bfea32fe6caff3e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_potentiometer.html#a518a49f1d9d85ae9bfea32fe6caff3e7">changed</a> ()</td></tr>
<tr class="separator:a518a49f1d9d85ae9bfea32fe6caff3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c44aecdfce24a5dd0e719b94267dc6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_potentiometer.html#a88c44aecdfce24a5dd0e719b94267dc6">getValue</a> ()</td></tr>
<tr class="separator:a88c44aecdfce24a5dd0e719b94267dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7307a8f883fb934f0440b2b4dc47b823"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_potentiometer.html#a7307a8f883fb934f0440b2b4dc47b823">clearState</a> ()</td></tr>
<tr class="separator:a7307a8f883fb934f0440b2b4dc47b823"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper for hardware interface -Potentiometer-. </p>
<h2>Handling of potentiometers</h2>
<p>Since this design overloads the potentiometers ( for each settings mode, a given potentiometer controls some aspect of a different effect module ), I had to think long and hard about what should happen when a new mode is selected, since the pot can't move to reflect the ( different ) setting of the ( different ) parameter of the ( different ) effect module. I chose to ignore each pot until it is moved, at which time the related effect module setting will ( unfortunately ) jump to the current pot setting. *(Note to Paul - consider offering a rotary-encoder option here...)* This brings up a <em>different</em> gotcha. Reading a voltage several times will often yield different values. This will cause the pot value to be perceived as changed. Rats. So I had to add a guard band around the current setting, considering any reading within the guard band to be unchanged. I also added an <a href="https://en.wikipedia.org/wiki/Moving_average">EWMA smoothing algorithm</a> to minimize the required size of the guard band. The larger the guard band, the more one has to move the pot in order for the change to be noticed. The longer the averaging period, the more sluggishly the reaction to a change occurs and settles. I had to split the difference. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a266317bbba4856942985925d044b969a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a266317bbba4856942985925d044b969a">&#9670;&nbsp;</a></span>Potentiometer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Potentiometer::Potentiometer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a518a49f1d9d85ae9bfea32fe6caff3e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a518a49f1d9d85ae9bfea32fe6caff3e7">&#9670;&nbsp;</a></span>changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Potentiometer::changed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_potentiometer_a518a49f1d9d85ae9bfea32fe6caff3e7_icgraph.png" border="0" usemap="#class_potentiometer_a518a49f1d9d85ae9bfea32fe6caff3e7_icgraph" alt=""/></div>
<map name="class_potentiometer_a518a49f1d9d85ae9bfea32fe6caff3e7_icgraph" id="class_potentiometer_a518a49f1d9d85ae9bfea32fe6caff3e7_icgraph">
<area shape="rect" id="node2" href="class_open_effects_box.html#a5ce71cb124645f49096492bc37cc0603" title="OpenEffectsBox::tickle" alt="" coords="216,5,371,31"/>
<area shape="rect" id="node3" href="general_open_effects_box__v4_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="419,5,466,31"/>
</map>
</div>

</div>
</div>
<a id="a7307a8f883fb934f0440b2b4dc47b823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7307a8f883fb934f0440b2b4dc47b823">&#9670;&nbsp;</a></span>clearState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Potentiometer::clearState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a88c44aecdfce24a5dd0e719b94267dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88c44aecdfce24a5dd0e719b94267dc6">&#9670;&nbsp;</a></span>getValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Potentiometer::getValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_potentiometer_a88c44aecdfce24a5dd0e719b94267dc6_icgraph.png" border="0" usemap="#class_potentiometer_a88c44aecdfce24a5dd0e719b94267dc6_icgraph" alt=""/></div>
<map name="class_potentiometer_a88c44aecdfce24a5dd0e719b94267dc6_icgraph" id="class_potentiometer_a88c44aecdfce24a5dd0e719b94267dc6_icgraph">
<area shape="rect" id="node2" href="class_open_effects_box.html#a5ce71cb124645f49096492bc37cc0603" title="OpenEffectsBox::tickle" alt="" coords="217,5,372,31"/>
<area shape="rect" id="node3" href="general_open_effects_box__v4_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="420,5,467,31"/>
</map>
</div>

</div>
</div>
<a id="ab1c2e1513f98952487482eb48406f1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1c2e1513f98952487482eb48406f1bb">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Potentiometer::init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em> = <code><a class="el" href="_potentiometer_8h.html#ada534779e17a276eadfea81c53d6bd03">_Potentiometer_VERBOSE_DEFAULT</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_potentiometer_ab1c2e1513f98952487482eb48406f1bb_icgraph.png" border="0" usemap="#class_potentiometer_ab1c2e1513f98952487482eb48406f1bb_icgraph" alt=""/></div>
<map name="class_potentiometer_ab1c2e1513f98952487482eb48406f1bb_icgraph" id="class_potentiometer_ab1c2e1513f98952487482eb48406f1bb_icgraph">
<area shape="rect" id="node2" href="class_open_effects_box_h_w.html#ac070397f7c596522c83c7ff1d540e2df" title="OpenEffectsBoxHW::init" alt="" coords="182,5,346,31"/>
<area shape="rect" id="node3" href="class_open_effects_box.html#aea127362d5b00701ced70f20f728b60f" title="OpenEffectsBox::init" alt="" coords="394,5,536,31"/>
<area shape="rect" id="node4" href="general_open_effects_box__v4_8ino.html#a4fc01d736fe50cf5b977f755b675f11d" title="setup" alt="" coords="584,5,638,31"/>
</map>
</div>

</div>
</div>
<a id="a56e36ed55abee08cbe81ce01687f82ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56e36ed55abee08cbe81ce01687f82ad">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Potentiometer::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_potentiometer_8h_source.html">Potentiometer.h</a></li>
<li><a class="el" href="_potentiometer_8cpp.html">Potentiometer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_potentiometer.html">Potentiometer</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
